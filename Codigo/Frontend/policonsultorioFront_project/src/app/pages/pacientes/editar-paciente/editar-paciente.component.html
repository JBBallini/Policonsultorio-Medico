<div class="page-container">
  <h1 class="page-title">Editar Paciente</h1>

  <div class="toolbar">
    <button class="btn-secondary" type="button" (click)="volverAListaDePacientes()">← Volver</button>
  </div>

  <div class="card-container">
    <div class="form-box">
      <form [formGroup]="pacienteForm" (ngSubmit)="actualizarPaciente()">
        <h3 class="section-title">Datos del Paciente</h3>

        <div class="form-grid">
          <div class="form-group">
            <label>DNI</label>
            <input formControlName="dniPaciente" required />
          </div>

          <div class="form-group">
            <label>Nombre</label>
            <input formControlName="nombre" required />
          </div>

          <div class="form-group">
            <label>Apellido</label>
            <input formControlName="apellido" required />
          </div>

          <div class="form-group">
            <label>Teléfono</label>
            <input formControlName="telefono" required />
          </div>

          <div class="form-group">
            <label>Email</label>
            <input formControlName="email" required />
          </div>

          <div class="form-group">
            <label>Fecha de nacimiento</label>
            <input
              type="date"
              formControlName="fechaNacimiento"
              (change)="verificarEdadParaResponsable()"
            />
          </div>

          <div class="form-group">
            <label>Dirección</label>
            <input formControlName="direccion" />
          </div>

          <div class="form-group">
            <label>Tipo de sangre</label>
            <input formControlName="tipoSangre" />
          </div>
        </div>

        <!-- RESPONSABLE -->
        <div *ngIf="tieneResponsable" [formGroup]="responsableForm">
          <h3 class="section-title">Datos del Responsable</h3>

          <div class="form-grid">
            <div class="form-group">
              <label>DNI Responsable</label>
              <input formControlName="dniResponsable" />
            </div>

            <div class="form-group">
              <label>Nombre</label>
              <input formControlName="nombre" />
            </div>

            <div class="form-group">
              <label>Apellido</label>
              <input formControlName="apellido" />
            </div>

            <div class="form-group">
              <label>Teléfono</label>
              <input formControlName="telefono" />
            </div>

            <div class="form-group">
              <label>Email</label>
              <input formControlName="email" />
            </div>

            <div class="form-group">
              <label>Fecha de nacimiento</label>
              <input type="date" formControlName="fechaNacimiento" />
            </div>

            <div class="form-group">
              <label>Dirección</label>
              <input formControlName="direccion" />
            </div>

            <div class="form-group">
              <label>Tipo de sangre</label>
              <input formControlName="tipoSangre" />
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="actions">
          <button type="submit" class="btn-primary">Guardar Cambios</button>
        </div>
      </form>

      <p *ngIf="mensaje" class="mensaje">{{ mensaje }}</p>
      <p *ngIf="error" class="error">{{ error }}</p>
    </div>
  </div>
</div>


