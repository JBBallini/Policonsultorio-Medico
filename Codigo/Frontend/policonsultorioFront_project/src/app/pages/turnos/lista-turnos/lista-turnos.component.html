<h2>Turnos</h2>

<button class="volver" (click)="volver()">Volver</button>
<form [formGroup]="form" (ngSubmit)="filtrar()">
  <label>Buscar por DNI de paciente</label>
  <input formControlName="dni" placeholder="DNI" />
  <div class="actions">
    <button type="submit" class="primary">Buscar</button>
    <button type="button" (click)="limpiar()">Limpiar</button>
  </div>
</form>

@if (cargando) {
  <div>Cargando...</div>
}
@if (mensaje && !cargando) {
  <div class="mensaje">{{ mensaje }}</div>
}

<table class="table" *ngIf="!cargando">
  <thead>
    <tr>
      <th>Fecha</th>
      <th>Hora</th>
      <th>DNI Paciente</th>
      <th>DNI Médico</th>
      <th>Asistencia</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let t of filtrados">
      <td>{{ t.fecha }}</td>
      <td>{{ t.hora }}</td>
      <td>{{ t.dniPaciente?.dniPaciente || t.dniPaciente }}</td>
      <td>{{ t.dniMedico?.dniMedico || t.dniMedico }}</td>
      <td>{{ t.estadoAsistencia ? 'Sí' : 'No' }}</td>
      <td class="row-actions">
        <button type="button" (click)="editar(t.id || t.pk)" class="small">Editar</button>
        <button type="button" (click)="eliminar(t.id || t.pk)" class="small danger">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>

