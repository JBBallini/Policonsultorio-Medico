<div class="page-container">
  <h1 class="page-title">Registrar Turno</h1>

  <div class="toolbar">
    <button class="btn-secondary" type="button" (click)="volver()">← Volver</button>
  </div>

  <div class="card-container">
    <div class="form-box">
      <div *ngIf="paciente" class="paciente-info">
        <p><strong>Paciente:</strong> {{ paciente.nombre }} {{ paciente.apellido }}</p>
        <p><strong>DNI:</strong> {{ paciente.dniPaciente }}</p>
      </div>

      <form [formGroup]="turnoForm" (ngSubmit)="crearTurno()">
        <div class="form-grid">
          <div class="form-group">
            <label>Especialidad</label>
            <select formControlName="especialidad" (change)="filtrarMedicosPorEspecialidad()">
              <option *ngFor="let e of especialidades" [value]="e">{{ e }}</option>
            </select>
          </div>

          <div class="form-group">
            <label>Médico</label>
            <select formControlName="dniMedico" (change)="cargarHorariosDisponibles()">
              <option *ngFor="let m of medicosFiltrados" [value]="m.dniMedico">
                {{ m.nombre }} {{ m.apellido }} ({{ m.dniMedico }})
              </option>
            </select>
          </div>

          <div class="form-group">
            <label>Fecha</label>
            <input type="date" formControlName="fecha" (change)="cargarHorariosDisponibles()" />
          </div>

          <div class="form-group">
            <label>Horario disponible</label>
            <select formControlName="hora">
              <option *ngFor="let h of horariosDisponibles" [value]="h">{{ h }}</option>
            </select>
          </div>

          <div class="form-group">
            <label>Monto ($)</label>
            <input type="number" formControlName="monto" min="0" />
          </div>
        </div>

        <div class="divider"></div>

        <div class="actions">
          <button type="submit" class="btn-primary">Registrar Turno</button>
        </div>
      </form>

      <p *ngIf="mensaje" class="mensaje">{{ mensaje }}</p>
      <p *ngIf="error" class="error">{{ error }}</p>
    </div>
  </div>
</div>
